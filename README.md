## 活跃用户数据统计程序说明文档

- ### 概括
    #### 此程序作用为解析服务器日志文件，提取活跃用户数据
    
- ### 日志处理配置
    ```
    由于服务器微服务的架构，日志内容比较分散，需要做解析配置
    详见src\main\java\com\meari\active\user\util\LogHandler.java
    ```
- ### 存储说明
    ```
    1.只统计userId大于10000000的数据；
    2.用户暂时限制到十万以防出现异常数据bit过大导致占用过多内存；
    3.使用bitmap存储是为了方便统计月活跃用户，以及应对用户增长带来的统计数据存储空间占用。
    ```
- ### 任务流程说明
    ```
    1.获取：根据配置的日志目录及命名格式获取日志文件；
    2.解析：解析日志根据配置的规则获取目标用户id；
    3.存储：将获取到的活跃用户数据以日期为单位以bitmap的数据结构存入redis；
    4.展示：详见后台管理系统userManager/activeUser页面。
    ```
- ### 部署
    ```
    位置：（HZ、US、EU）172.16.1.2:/home/alpha/pps/jar/service/active-user
    启动：./start.sh （可传一个参数，意为处理前{$1}天的日志文件，不传默认只处理前一天的日志）
    定时：crontab定时任务每天01：00自动执行统计
    ```